<!DOCTYPE html>
<html lang="hr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustav upravljanja saksofonskim jezičcima</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <h1>Sustav upravljanja saksofonskim jezičcima</h1>
    <form id="dodajJezičakForma">
        <input type="text" name="tip" placeholder="Tip (npr., alt, tenor)" required>
        <input type="number" name="performanse" placeholder="Performanse" required>
        <input type="number" name="period_prilagodbe" placeholder="Period prilagodbe" required>
        <button type="submit">Dodaj jezičak</button>
    </form>
    <ul id="listaJezičaka">
        {% for jezičak in jezičci %}
        <li>
            <h2>ID jezička: {{ jezičak.id }}</h2>
            <p>Tip: {{ jezičak.tip }}</p>
            <p>Performanse: {{ jezičak.performanse }}</p>
            <p>Period prilagodbe: {{ jezičak.period_prilagodbe }}</p>
            <button onclick="urediJezičak({{ jezičak.id }})">Uredi</button>
            <button onclick="obrisiJezičak({{ jezičak.id }})">Obriši</button>
        </li>
        {% endfor %}
    </ul>
    <script>
        document.getElementById('dodajJezičakForma').addEventListener('submit', function (event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            fetch('/jezičak', {
                method: 'POST',
                body: formData
            }).then(response => response.json())
                .then(data => location.reload());
        });

        function urediJezičak(id) {
            const tip = prompt('Unesite novi tip:');
            const performanse = prompt('Unesite nove performanse:');
            const period prilagodbe = prompt('Unesite novi period prilagodbe:');
            if (tip && performanse && period prilagodbe) {
                const formData = new FormData();
                formData.append('tip', tip);
                formData.append('performanse', performanse);
                formData.append('period prilagodbe', period prilagodbe);
                fetch(`/jezičak/${id}`, {
                    method: 'PUT',
                    body: formData
                }).then(response => response.json())
                    .then(data => location.reload());
            }
        }

        function obrisiJezičak(id) {
            fetch(`/jezičak/${id}`, {
                method: 'DELETE'
            }).then(response => response.json())
                .then(data => location.reload());
        }
    </script>
</body>

</html>